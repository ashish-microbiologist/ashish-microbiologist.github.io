// assets/js/apps-data.js

/**
 * OP ASHISH YT - MOD APK Website
 * Complete Apps Database with Enhanced Features
 * Version: 3.0.0
 */

// Main Apps Database with 30+ Detailed Apps
const appsData = [
    {
        id: 1,
        name: "WhatsApp MOD",
        description: "WhatsApp à¤•à¤¾ Premium MOD Version à¤œà¤¿à¤¸à¤®à¥‡à¤‚ à¤¸à¤­à¥€ Paid Features Unlock à¤¹à¥ˆà¤‚à¥¤ Blue Tick Hide, Status Download, Anti-Delete Messages à¤”à¤° à¤­à¥€ à¤¬à¤¹à¥à¤¤ à¤•à¥à¤›à¥¤",
        version: "2.24.8.76",
        size: "92.5 MB",
        logo: "assets/img/apps/whatsapp-mod.png",
        apk_file: "uploads/apk/whatsapp_mod_v2.24.8.76.apk",
        downloads: 12548,
        created_at: "2024-01-15",
        category: "social",
        features: [
            "Blue Tick Hide",
            "Status Download",
            "Anti-Delete Messages",
            "Stealth Mode",
            "Custom Themes",
            "Increased Limits",
            "No Ads"
        ],
        rating: 4.8,
        developer: "WhatsApp Inc. (MOD)",
        requirements: "Android 5.0+",
        whats_new: "à¤¨à¤ Emojis, Better Privacy, Faster Performance",
        last_updated: "2024-01-20",
        file_size: 96947200,
        premium: true,
        trending: true
    },
    {
        id: 2,
        name: "YouTube Premium MOD",
        description: "YouTube à¤•à¤¾ Premium Version à¤¬à¤¿à¤²à¥à¤•à¥à¤² Free à¤®à¥‡à¤‚à¥¤ Background Play, No Ads, Video Download à¤”à¤° à¤¸à¤­à¥€ Premium Features Unlockà¥¤",
        version: "19.08.35",
        size: "128.7 MB",
        logo: "assets/img/apps/youtube-premium.png",
        apk_file: "uploads/apk/youtube_premium_v19.08.35.apk",
        downloads: 21489,
        created_at: "2024-01-10",
        category: "entertainment",
        features: [
            "Background Play",
            "No Ads (Video & Banner)",
            "Video Download (4K)",
            "PiP Mode",
            "Skippable Intro",
            "Premium Themes",
            "SponsorBlock"
        ],
        rating: 4.9,
        developer: "Google (MOD)",
        requirements: "Android 6.0+",
        whats_new: "4K Support, New UI, Better Battery",
        last_updated: "2024-01-18",
        file_size: 134955008,
        premium: true,
        trending: true
    },
    {
        id: 3,
        name: "Instagram MOD",
        description: "Instagram à¤•à¤¾ Advanced MOD Versionà¥¤ Download Photos/Videos, Zoom Profile Pictures, Stealth Mode à¤”à¤° à¤…à¤¨à¥à¤¯ Premium Featuresà¥¤",
        version: "302.0.0.30.107",
        size: "95.3 MB",
        logo: "assets/img/apps/instagram-mod.png",
        apk_file: "uploads/apk/instagram_mod_v302.0.0.30.107.apk",
        downloads: 18765,
        created_at: "2024-01-12",
        category: "social",
        features: [
            "Download Media",
            "Zoom Profile Pictures",
            "Stealth Mode",
            "No Ads",
            "Analytics",
            "Custom Layout",
            "Story Viewer"
        ],
        rating: 4.7,
        developer: "Meta (MOD)",
        requirements: "Android 7.0+",
        whats_new: "Reels Download, New Filters",
        last_updated: "2024-01-16",
        file_size: 99942400,
        premium: true
    },
    {
        id: 4,
        name: "Spotify Premium MOD",
        description: "Spotify Premium à¤¬à¤¿à¤²à¥à¤•à¥à¤² Free à¤®à¥‡à¤‚à¥¤ Unlimited Skips, No Ads, Extreme Quality à¤”à¤° à¤¸à¤­à¥€ Premium Songs Unlockà¥¤",
        version: "8.9.42.521",
        size: "112.4 MB",
        logo: "assets/img/apps/spotify-premium.png",
        apk_file: "uploads/apk/spotify_premium_v8.9.42.521.apk",
        downloads: 16234,
        created_at: "2024-01-08",
        category: "entertainment",
        features: [
            "Unlimited Skips",
            "No Ads",
            "Extreme Quality (320kbps)",
            "Download Songs",
            "No Shuffle Play",
            "Lyrics View",
            "Unlock All Regions"
        ],
        rating: 4.8,
        developer: "Spotify (MOD)",
        requirements: "Android 5.0+",
        whats_new: "Better Audio, New UI, Faster",
        last_updated: "2024-01-15",
        file_size: 117858304,
        premium: true,
        trending: true
    },
    {
        id: 5,
        name: "GB WhatsApp",
        description: "WhatsApp à¤•à¤¾ Most Popular MOD Versionà¥¤ Dual WhatsApp, 100+ Themes, Advanced Privacy à¤”à¤° à¤¬à¤¹à¥à¤¤ à¤¸à¤¾à¤°à¥‡ Custom Featuresà¥¤",
        version: "17.60",
        size: "88.9 MB",
        logo: "assets/img/apps/gbwhatsapp.png",
        apk_file: "uploads/apk/gbwhatsapp_v17.60.apk",
        downloads: 32897,
        created_at: "2024-01-05",
        category: "social",
        features: [
            "Dual WhatsApp",
            "100+ Custom Themes",
            "Hide Online Status",
            "Auto Reply",
            "Message Scheduler",
            "Increased Limits",
            "Backup to Google Drive"
        ],
        rating: 4.9,
        developer: "GB Mods",
        requirements: "Android 4.4+",
        whats_new: "New Themes, Better Privacy",
        last_updated: "2024-01-12",
        file_size: 93265920,
        premium: false,
        featured: true
    },
    {
        id: 6,
        name: "TikTok MOD",
        description: "TikTok à¤•à¤¾ Premium MOD Versionà¥¤ No Watermark, No Ads, Region Unlock à¤”à¤° à¤¸à¤­à¥€ Premium Effects Free à¤®à¥‡à¤‚à¥¤",
        version: "32.5.4",
        size: "118.6 MB",
        logo: "assets/img/apps/tiktok-mod.png",
        apk_file: "uploads/apk/tiktok_mod_v32.5.4.apk",
        downloads: 14238,
        created_at: "2024-01-14",
        category: "entertainment",
        features: [
            "No Watermark",
            "No Ads",
            "Region Unlock",
            "All Effects Unlocked",
            "Download Videos",
            "Stealth Mode",
            "Increased Time Limit"
        ],
        rating: 4.6,
        developer: "ByteDance (MOD)",
        requirements: "Android 5.0+",
        whats_new: "New Effects, Better Editor",
        last_updated: "2024-01-19",
        file_size: 124362752,
        premium: true
    },
    {
        id: 7,
        name: "Snapchat MOD",
        description: "Snapchat à¤•à¤¾ MOD Version à¤œà¤¿à¤¸à¤®à¥‡à¤‚ à¤¸à¤­à¥€ Premium Filters à¤”à¤° Features Unlock à¤¹à¥ˆà¤‚à¥¤ Save Snaps, Stealth Mode à¤”à¤° à¤¬à¤¹à¥à¤¤ à¤•à¥à¤›à¥¤",
        version: "12.65.0.40",
        size: "105.2 MB",
        logo: "assets/img/apps/snapchat-mod.png",
        apk_file: "uploads/apk/snapchat_mod_v12.65.0.40.apk",
        downloads: 9876,
        created_at: "2024-01-07",
        category: "social",
        features: [
            "Unlock All Filters",
            "Save Snaps",
            "Stealth Mode",
            "No Ads",
            "Increased Time",
            "Custom Filters",
            "Story Download"
        ],
        rating: 4.5,
        developer: "Snap Inc. (MOD)",
        requirements: "Android 5.0+",
        whats_new: "New Lenses, Better Camera",
        last_updated: "2024-01-14",
        file_size: 110330368,
        premium: false
    },
    {
        id: 8,
        name: "Facebook MOD",
        description: "Facebook à¤•à¤¾ MOD Versionà¥¤ Download Videos, No Ads, Stealth Mode à¤”à¤° à¤¸à¤­à¥€ Premium Features Unlockà¥¤",
        version: "404.0.0.40.115",
        size: "135.8 MB",
        logo: "assets/img/apps/facebook-mod.png",
        apk_file: "uploads/apk/facebook_mod_v404.0.0.40.115.apk",
        downloads: 11245,
        created_at: "2024-01-09",
        category: "social",
        features: [
            "Download Videos",
            "No Ads",
            "Stealth Mode",
            "Save Stories",
            "Custom Themes",
            "Message Scheduler",
            "Analytics"
        ],
        rating: 4.4,
        developer: "Meta (MOD)",
        requirements: "Android 6.0+",
        whats_new: "New UI, Faster Loading",
        last_updated: "2024-01-16",
        file_size: 142395392,
        premium: true
    },
    {
        id: 9,
        name: "MX Player Pro",
        description: "MX Player à¤•à¤¾ Pro Version à¤¬à¤¿à¤²à¥à¤•à¥à¤² Free à¤®à¥‡à¤‚à¥¤ All Codecs Unlock, No Ads, Hardware Acceleration à¤”à¤° à¤¬à¤¹à¥à¤¤ à¤•à¥à¤›à¥¤",
        version: "1.61.5",
        size: "45.8 MB",
        logo: "assets/img/apps/mx-player-pro.png",
        apk_file: "uploads/apk/mx_player_pro_v1.61.5.apk",
        downloads: 8765,
        created_at: "2024-01-11",
        category: "tools",
        features: [
            "All Codecs Unlocked",
            "No Ads",
            "Hardware Acceleration",
            "Subtitle Support",
            "Kids Lock",
            "Network Streaming",
            "Gesture Controls"
        ],
        rating: 4.7,
        developer: "MX Media (MOD)",
        requirements: "Android 4.1+",
        whats_new: "New Codecs, Better UI",
        last_updated: "2024-01-17",
        file_size: 48005120,
        premium: true
    },
    {
        id: 10,
        name: "Poweramp Pro",
        description: "Poweramp à¤•à¤¾ Full Pro Versionà¥¤ Best Audio Quality, All Features Unlock, No Ads à¤”à¤° Professional Audio Controlsà¥¤",
        version: "build-981",
        size: "38.9 MB",
        logo: "assets/img/apps/poweramp-pro.png",
        apk_file: "uploads/apk/poweramp_pro_build-981.apk",
        downloads: 6543,
        created_at: "2024-01-06",
        category: "tools",
        features: [
            "Full Pro Version",
            "Best Audio Quality",
            "No Ads",
            "All Themes Unlock",
            "EQ Presets",
            "Replay Gain",
            "Hi-Res Output"
        ],
        rating: 4.9,
        developer: "Max MP (MOD)",
        requirements: "Android 5.0+",
        whats_new: "New EQ, Better Sound",
        last_updated: "2024-01-13",
        file_size: 40789504,
        premium: true,
        featured: true
    },
    {
        id: 11,
        name: "Subway Surfers MOD",
        description: "Subway Surfers à¤•à¤¾ MOD Versionà¥¤ Unlimited Coins, All Characters Unlock, No Ads à¤”à¤° à¤¸à¤­à¥€ Premium Featuresà¥¤",
        version: "3.18.0",
        size: "185.4 MB",
        logo: "assets/img/apps/subway-surfers-mod.png",
        apk_file: "uploads/apk/subway_surfers_mod_v3.18.0.apk",
        downloads: 23487,
        created_at: "2024-01-13",
        category: "games",
        features: [
            "Unlimited Coins",
            "All Characters Unlock",
            "No Ads",
            "All Boards Unlock",
            "Mega Jump",
            "God Mode",
            "All Locations Unlock"
        ],
        rating: 4.8,
        developer: "SYBO Games (MOD)",
        requirements: "Android 5.0+",
        whats_new: "New Character, New Map",
        last_updated: "2024-01-20",
        file_size: 194415616,
        premium: false,
        trending: true
    },
    {
        id: 12,
        name: "Temple Run 2 MOD",
        description: "Temple Run 2 à¤•à¤¾ Premium MOD Versionà¥¤ Unlimited Gems, All Characters, No Ads à¤”à¤° à¤¸à¤­à¥€ Powerups Unlockà¥¤",
        version: "1.110.0",
        size: "165.3 MB",
        logo: "assets/img/apps/temple-run2-mod.png",
        apk_file: "uploads/apk/temple_run2_mod_v1.110.0.apk",
        downloads: 18765,
        created_at: "2024-01-04",
        category: "games",
        features: [
            "Unlimited Gems",
            "All Characters Unlock",
            "No Ads",
            "All Powerups",
            "God Mode",
            "Speed Boost",
            "All Maps Unlock"
        ],
        rating: 4.7,
        developer: "Imangi Studios (MOD)",
        requirements: "Android 4.4+",
        whats_new: "New Character, New Powerup",
        last_updated: "2024-01-11",
        file_size: 173342720,
        premium: false
    },
    {
        id: 13,
        name: "Photo Editor Pro",
        description: "Professional Photo Editor à¤•à¤¾ MOD Versionà¥¤ All Filters Unlock, No Watermark, No Ads à¤”à¤° Advanced Editing Toolsà¥¤",
        version: "6.4.8",
        size: "52.7 MB",
        logo: "assets/img/apps/photo-editor-pro.png",
        apk_file: "uploads/apk/photo_editor_pro_v6.4.8.apk",
        downloads: 9876,
        created_at: "2024-01-03",
        category: "tools",
        features: [
            "All Filters Unlocked",
            "No Watermark",
            "No Ads",
            "Advanced Tools",
            "RAW Support",
            "Batch Edit",
            "Magic Eraser"
        ],
        rating: 4.6,
        developer: "Dev.Macgyver (MOD)",
        requirements: "Android 5.0+",
        whats_new: "New Filters, Better AI",
        last_updated: "2024-01-10",
        file_size: 55263232,
        premium: true
    },
    {
        id: 14,
        name: "VPN Pro - Unlimited",
        description: "Premium VPN Service à¤¬à¤¿à¤²à¥à¤•à¥à¤² Free à¤®à¥‡à¤‚à¥¤ Unlimited Data, No Logs, All Servers Unlock à¤”à¤° High Speed Connectionà¥¤",
        version: "2.8.9",
        size: "28.5 MB",
        logo: "assets/img/apps/vpn-pro.png",
        apk_file: "uploads/apk/vpn_pro_v2.8.9.apk",
        downloads: 15678,
        created_at: "2024-01-02",
        category: "tools",
        features: [
            "Unlimited Data",
            "No Logs Policy",
            "All Servers Unlock",
            "High Speed",
            "Kill Switch",
            "Ad Blocker",
            "Split Tunneling"
        ],
        rating: 4.5,
        developer: "VPN Masters (MOD)",
        requirements: "Android 5.0+",
        whats_new: "New Servers, Faster",
        last_updated: "2024-01-09",
        file_size: 29884416,
        premium: true
    },
    {
        id: 15,
        name: "8 Ball Pool MOD",
        description: "8 Ball Pool à¤•à¤¾ MOD Versionà¥¤ Unlimited Coins, All Cues Unlock, No Ads à¤”à¤° à¤¸à¤­à¥€ Premium Featuresà¥¤",
        version: "5.15.0",
        size: "145.6 MB",
        logo: "assets/img/apps/8ball-pool-mod.png",
        apk_file: "uploads/apk/8ball_pool_mod_v5.15.0.apk",
        downloads: 19876,
        created_at: "2024-01-01",
        category: "games",
        features: [
            "Unlimited Coins",
            "All Cues Unlock",
            "No Ads",
            "All Tables Unlock",
            "Aim Assist",
            "Win Every Game",
            "All Avatars Unlock"
        ],
        rating: 4.8,
        developer: "Miniclip (MOD)",
        requirements: "Android 5.0+",
        whats_new: "New Cues, New Tables",
        last_updated: "2024-01-08",
        file_size: 152674304,
        premium: false,
        trending: true
    },
    {
        id: 16,
        name: "Telegram Premium MOD",
        description: "Telegram à¤•à¤¾ Premium MOD Versionà¥¤ Increased Limits, No Ads, Advanced Features à¤”à¤° à¤¸à¤­à¥€ Premium Stickersà¥¤",
        version: "10.3.0",
        size: "85.4 MB",
        logo: "assets/img/apps/telegram-premium.png",
        apk_file: "uploads/apk/telegram_premium_v10.3.0.apk",
        downloads: 8765,
        created_at: "2023-12-28",
        category: "social",
        features: [
            "Increased Limits",
            "No Ads",
            "All Stickers Unlock",
            "Stealth Mode",
            "Message Scheduler",
            "Auto Delete",
            "Channel Analytics"
        ],
        rating: 4.7,
        developer: "Telegram (MOD)",
        requirements: "Android 5.0+",
        whats_new: "New Stickers, Better Privacy",
        last_updated: "2024-01-04",
        file_size: 89538560,
        premium: true
    },
    {
        id: 17,
        name: "Adobe Photoshop Express",
        description: "Adobe Photoshop à¤•à¤¾ MOD Versionà¥¤ All Filters Unlock, No Watermark, No Ads à¤”à¤° Professional Editing Toolsà¥¤",
        version: "10.0.11",
        size: "185.3 MB",
        logo: "assets/img/apps/photoshop-express.png",
        apk_file: "uploads/apk/photoshop_express_v10.0.11.apk",
        downloads: 7654,
        created_at: "2023-12-25",
        category: "tools",
        features: [
            "All Filters Unlocked",
            "No Watermark",
            "No Ads",
            "RAW Support",
            "Healing Brush",
            "Layers Support",
            "Advanced Tools"
        ],
        rating: 4.9,
        developer: "Adobe (MOD)",
        requirements: "Android 7.0+",
        whats_new: "New AI Tools, Faster",
        last_updated: "2024-01-01",
        file_size: 194314240,
        premium: true,
        featured: true
    },
    {
        id: 18,
        name: "PUBG Mobile MOD",
        description: "PUBG Mobile à¤•à¤¾ MOD Versionà¥¤ Aimbot, Wallhack, Unlimited UC, No Recoil à¤”à¤° à¤¸à¤­à¥€ Premium Featuresà¥¤",
        version: "2.9.0",
        size: "2.1 GB",
        logo: "assets/img/apps/pubg-mobile-mod.png",
        apk_file: "uploads/apk/pubg_mobile_mod_v2.9.0.apk",
        downloads: 34567,
        created_at: "2023-12-20",
        category: "games",
        features: [
            "Aimbot",
            "Wallhack",
            "Unlimited UC",
            "No Recoil",
            "Speed Hack",
            "Magic Bullet",
            "All Skins Unlock"
        ],
        rating: 4.8,
        developer: "Tencent (MOD)",
        requirements: "Android 6.0+",
        whats_new: "New Map, New Weapons",
        last_updated: "2023-12-27",
        file_size: 2254438400,
        premium: true,
        trending: true
    },
    {
        id: 19,
        name: "Netflix MOD",
        description: "Netflix à¤•à¤¾ Premium MOD Versionà¥¤ All Plans Unlock, No Ads, Download Movies à¤”à¤° à¤¸à¤­à¥€ Premium Featuresà¥¤",
        version: "8.98.0",
        size: "45.6 MB",
        logo: "assets/img/apps/netflix-mod.png",
        apk_file: "uploads/apk/netflix_mod_v8.98.0.apk",
        downloads: 19876,
        created_at: "2023-12-15",
        category: "entertainment",
        features: [
            "All Plans Unlocked",
            "No Ads",
            "Download Movies",
            "4K Support",
            "All Regions",
            "Multiple Profiles",
            "Kids Mode"
        ],
        rating: 4.9,
        developer: "Netflix (MOD)",
        requirements: "Android 5.0+",
        whats_new: "New Content, Better UI",
        last_updated: "2023-12-22",
        file_size: 47815065,
        premium: true
    },
    {
        id: 20,
        name: "Truecaller Premium",
        description: "Truecaller à¤•à¤¾ Premium MOD Versionà¥¤ No Ads, Advanced Spam Protection, Who Viewed Me à¤”à¤° à¤¸à¤­à¥€ Premium Featuresà¥¤",
        version: "13.40.6",
        size: "65.8 MB",
        logo: "assets/img/apps/truecaller-premium.png",
        apk_file: "uploads/apk/truecaller_premium_v13.40.6.apk",
        downloads: 12345,
        created_at: "2023-12-10",
        category: "tools",
        features: [
            "No Ads",
            "Advanced Spam Protection",
            "Who Viewed Me",
            "Call Recording",
            "Theme Customization",
            "Contact Backup",
            "Priority Support"
        ],
        rating: 4.6,
        developer: "Truecaller (MOD)",
        requirements: "Android 5.0+",
        whats_new: "New UI, Better Protection",
        last_updated: "2023-12-17",
        file_size: 69009408,
        premium: true
    }
];

// Featured Apps (Top 6 by Downloads)
const featuredApps = appsData
    .sort((a, b) => b.downloads - a.downloads)
    .slice(0, 6);

// Popular Apps (Top 10 by Downloads)
const popularApps = appsData
    .sort((a, b) => b.downloads - a.downloads)
    .slice(0, 10);

// New Apps (Last 10 Added)
const newApps = [...appsData]
    .sort((a, b) => new Date(b.created_at) - new Date(a.created_at))
    .slice(0, 10);

// Trending Apps (Based on recent activity)
const trendingApps = appsData
    .filter(app => app.trending || app.downloads > 15000)
    .sort(() => 0.5 - Math.random())
    .slice(0, 6);

// Premium Apps
const premiumApps = appsData.filter(app => app.premium);

// Categories Data
const categories = {
    social: appsData.filter(app => app.category === 'social'),
    entertainment: appsData.filter(app => app.category === 'entertainment'),
    tools: appsData.filter(app => app.category === 'tools'),
    games: appsData.filter(app => app.category === 'games'),
    all: appsData
};

// Statistics
const stats = {
    totalApps: appsData.length,
    totalDownloads: appsData.reduce((sum, app) => sum + app.downloads, 0),
    avgDownloads: Math.round(appsData.reduce((sum, app) => sum + app.downloads, 0) / appsData.length),
    totalSize: appsData.reduce((sum, app) => sum + app.file_size, 0),
    premiumCount: appsData.filter(app => app.premium).length,
    topCategory: 'games',
    mostDownloaded: appsData.reduce((max, app) => app.downloads > max.downloads ? app : max),
    averageRating: (appsData.reduce((sum, app) => sum + app.rating, 0) / appsData.length).toFixed(1)
};

// Utility Functions
const AppUtils = {
    // Get app by ID
    getAppById: function(id) {
        return appsData.find(app => app.id == id);
    },
    
    // Search apps by keyword
    searchApps: function(keyword) {
        const searchTerm = keyword.toLowerCase();
        return appsData.filter(app => 
            app.name.toLowerCase().includes(searchTerm) ||
            app.description.toLowerCase().includes(searchTerm) ||
            app.developer.toLowerCase().includes(searchTerm) ||
            app.features.some(feature => feature.toLowerCase().includes(searchTerm))
        );
    },
    
    // Filter apps by category
    filterByCategory: function(category) {
        return category === 'all' ? appsData : appsData.filter(app => app.category === category);
    },
    
    // Sort apps by criteria
    sortApps: function(apps, criteria) {
        const sorted = [...apps];
        switch(criteria) {
            case 'newest':
                return sorted.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
            case 'oldest':
                return sorted.sort((a, b) => new Date(a.created_at) - new Date(b.created_at));
            case 'popular':
                return sorted.sort((a, b) => b.downloads - a.downloads);
            case 'name_asc':
                return sorted.sort((a, b) => a.name.localeCompare(b.name));
            case 'name_desc':
                return sorted.sort((a, b) => b.name.localeCompare(a.name));
            case 'rating':
                return sorted.sort((a, b) => b.rating - a.rating);
            case 'size_asc':
                return sorted.sort((a, b) => a.file_size - b.file_size);
            case 'size_desc':
                return sorted.sort((a, b) => b.file_size - a.file_size);
            default:
                return sorted;
        }
    },
    
    // Get related apps
    getRelatedApps: function(appId, limit = 4) {
        const app = this.getAppById(appId);
        if (!app) return [];
        
        return appsData
            .filter(a => a.id !== app.id && a.category === app.category)
            .slice(0, limit);
    },
    
    // Format number
    formatNumber: function(num) {
        if (num >= 1000000) {
            return (num / 1000000).toFixed(1) + 'M';
        } else if (num >= 1000) {
            return (num / 1000).toFixed(1) + 'K';
        }
        return num.toString();
    },
    
    // Format file size
    formatFileSize: function(bytes) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    },
    
    // Get download count for app
    getDownloadCount: function(appId) {
        const saved = localStorage.getItem(`downloads_${appId}`);
        return saved ? parseInt(saved) : this.getAppById(appId)?.downloads || 0;
    },
    
    // Increment download count
    incrementDownload: function(appId) {
        const app = this.getAppById(appId);
        if (!app) return 0;
        
        let current = this.getDownloadCount(appId);
        current++;
        
        // Update localStorage
        localStorage.setItem(`downloads_${appId}`, current);
        
        return current;
    },
    
    // Get all categories with counts
    getCategoriesWithCounts: function() {
        const counts = {};
        appsData.forEach(app => {
            counts[app.category] = (counts[app.category] || 0) + 1;
        });
        
        return Object.entries(counts).map(([name, count]) => ({
            name,
            count,
            displayName: this.getCategoryDisplayName(name)
        }));
    },
    
    // Get category display name
    getCategoryDisplayName: function(category) {
        const names = {
            'social': 'à¤¸à¥‹à¤¶à¤² à¤®à¥€à¤¡à¤¿à¤¯à¤¾',
            'entertainment': 'à¤à¤‚à¤Ÿà¤°à¤Ÿà¥‡à¤¨à¤®à¥‡à¤‚à¤Ÿ',
            'tools': 'à¤Ÿà¥‚à¤²à¥à¤¸',
            'games': 'à¤—à¥‡à¤®à¥à¤¸',
            'all': 'à¤¸à¤­à¥€'
        };
        return names[category] || category;
    },
    
    // Generate random apps
    getRandomApps: function(limit = 6) {
        const shuffled = [...appsData].sort(() => 0.5 - Math.random());
        return shuffled.slice(0, limit);
    },
    
    // Get similar apps (based on category and features)
    getSimilarApps: function(appId, limit = 4) {
        const app = this.getAppById(appId);
        if (!app) return [];
        
        // Calculate similarity score
        const similarApps = appsData
            .filter(a => a.id !== app.id)
            .map(otherApp => {
                let score = 0;
                
                // Category match
                if (otherApp.category === app.category) score += 3;
                
                // Feature overlap
                const commonFeatures = app.features.filter(f => 
                    otherApp.features.includes(f)
                ).length;
                score += commonFeatures;
                
                // Rating similarity
                score += (5 - Math.abs(app.rating - otherApp.rating)) * 0.5;
                
                return { ...otherApp, similarityScore: score };
            })
            .sort((a, b) => b.similarityScore - a.similarityScore)
            .slice(0, limit)
            .map(({ similarityScore, ...app }) => app);
        
        return similarApps;
    },
    
    // Get recently updated apps
    getRecentlyUpdated: function(limit = 6) {
        return [...appsData]
            .filter(app => app.last_updated)
            .sort((a, b) => new Date(b.last_updated) - new Date(a.last_updated))
            .slice(0, limit);
    },
    
    // Get premium apps
    getPremiumApps: function() {
        return appsData.filter(app => app.premium);
    },
    
    // Get free apps
    getFreeApps: function() {
        return appsData.filter(app => !app.premium);
    },
    
    // Get trending apps
    getTrendingApps: function(limit = 6) {
        return appsData
            .filter(app => app.trending)
            .sort((a, b) => b.downloads - a.downloads)
            .slice(0, limit);
    },
    
    // Get featured apps
    getFeaturedApps: function() {
        return appsData.filter(app => app.featured);
    },
    
    // Update app downloads in data
    updateAppDownloads: function(appId, newDownloadCount) {
        const appIndex = appsData.findIndex(app => app.id == appId);
        if (appIndex !== -1) {
            appsData[appIndex].downloads = newDownloadCount;
            return true;
        }
        return false;
    },
    
    // Get app statistics
    getAppStatistics: function() {
        return {
            byCategory: this.getCategoriesWithCounts(),
            totalSize: this.formatFileSize(stats.totalSize),
            averageRating: stats.averageRating,
            premiumPercentage: Math.round((stats.premiumCount / stats.totalApps) * 100),
            topApps: appsData.slice(0, 5).map(app => ({
                name: app.name,
                downloads: app.downloads,
                rating: app.rating
            }))
        };
    },
    
    // Validate app data
    validateAppData: function(appData) {
        const errors = [];
        
        if (!appData.name || appData.name.trim().length < 3) {
            errors.push('App name must be at least 3 characters long');
        }
        
        if (!appData.description || appData.description.trim().length < 20) {
            errors.push('Description must be at least 20 characters long');
        }
        
        if (!appData.version || appData.version.trim().length === 0) {
            errors.push('Version is required');
        }
        
        if (!appData.category || !['social', 'entertainment', 'tools', 'games'].includes(appData.category)) {
            errors.push('Valid category is required');
        }
        
        if (appData.rating < 0 || appData.rating > 5) {
            errors.push('Rating must be between 0 and 5');
        }
        
        return errors;
    },
    
    // Generate next app ID
    getNextAppId: function() {
        return Math.max(...appsData.map(app => app.id)) + 1;
    },
    
    // Add new app to database
    addNewApp: function(appData) {
        const newId = this.getNextAppId();
        const newApp = {
            id: newId,
            name: appData.name,
            description: appData.description,
            version: appData.version,
            size: this.formatFileSize(appData.file_size || 0),
            logo: appData.logo || 'assets/img/default-logo.png',
            apk_file: appData.apk_file || '',
            downloads: 0,
            created_at: new Date().toISOString().split('T')[0],
            category: appData.category,
            features: appData.features || [],
            rating: appData.rating || 4.0,
            developer: appData.developer || 'Unknown',
            requirements: appData.requirements || 'Android 5.0+',
            whats_new: appData.whats_new || 'New features added',
            last_updated: new Date().toISOString().split('T')[0],
            file_size: appData.file_size || 0,
            premium: appData.premium || false,
            trending: appData.trending || false,
            featured: appData.featured || false
        };
        
        const errors = this.validateAppData(newApp);
        if (errors.length > 0) {
            throw new Error(errors.join(', '));
        }
        
        appsData.unshift(newApp);
        return newApp;
    },
    
    // Update existing app
    updateApp: function(appId, updatedData) {
        const appIndex = appsData.findIndex(app => app.id == appId);
        if (appIndex === -1) {
            throw new Error('App not found');
        }
        
        const updatedApp = {
            ...appsData[appIndex],
            ...updatedData,
            last_updated: new Date().toISOString().split('T')[0]
        };
        
        if (updatedData.size && !updatedData.file_size) {
            // Convert size string to bytes for file_size
            const sizeMatch = updatedData.size.match(/(\d+\.?\d*)\s*(MB|GB|KB)/i);
            if (sizeMatch) {
                const size = parseFloat(sizeMatch[1]);
                const unit = sizeMatch[2].toUpperCase();
                const multipliers = { KB: 1024, MB: 1024 * 1024, GB: 1024 * 1024 * 1024 };
                updatedApp.file_size = Math.round(size * (multipliers[unit] || 1024 * 1024));
            }
        }
        
        const errors = this.validateAppData(updatedApp);
        if (errors.length > 0) {
            throw new Error(errors.join(', '));
        }
        
        appsData[appIndex] = updatedApp;
        return updatedApp;
    },
    
    // Delete app
    deleteApp: function(appId) {
        const appIndex = appsData.findIndex(app => app.id == appId);
        if (appIndex === -1) {
            throw new Error('App not found');
        }
        
        const deletedApp = appsData[appIndex];
        appsData.splice(appIndex, 1);
        return deletedApp;
    },
    
    // Get apps by developer
    getAppsByDeveloper: function(developer) {
        return appsData.filter(app => 
            app.developer.toLowerCase().includes(developer.toLowerCase())
        );
    },
    
    // Get apps with minimum rating
    getAppsByRating: function(minRating = 4.0) {
        return appsData.filter(app => app.rating >= minRating);
    },
    
    // Get recently added apps (last 30 days)
    getRecentlyAdded: function(days = 30) {
        const cutoffDate = new Date();
        cutoffDate.setDate(cutoffDate.getDate() - days);
        
        return appsData.filter(app => {
            const appDate = new Date(app.created_at);
            return appDate >= cutoffDate;
        });
    },
    
    // Search suggestions
    getSearchSuggestions: function(query, limit = 5) {
        if (!query || query.length < 2) return [];
        
        const suggestions = [];
        const queryLower = query.toLowerCase();
        
        // App names
        const nameMatches = appsData
            .filter(app => app.name.toLowerCase().includes(queryLower))
            .slice(0, limit)
            .map(app => ({ type: 'app', text: app.name, id: app.id }));
        
        // Categories
        const categoryMatches = Object.keys(categories)
            .filter(cat => this.getCategoryDisplayName(cat).toLowerCase().includes(queryLower))
            .slice(0, 3)
            .map(cat => ({ type: 'category', text: this.getCategoryDisplayName(cat), id: cat }));
        
        // Features
        const allFeatures = [...new Set(appsData.flatMap(app => app.features))];
        const featureMatches = allFeatures
            .filter(feature => feature.toLowerCase().includes(queryLower))
            .slice(0, 3)
            .map(feature => ({ type: 'feature', text: feature }));
        
        return [...nameMatches, ...categoryMatches, ...featureMatches].slice(0, limit);
    },
    
    // Export apps data as JSON
    exportAppsData: function() {
        return JSON.stringify(appsData, null, 2);
    },
    
    // Import apps data from JSON
    importAppsData: function(jsonData) {
        try {
            const importedData = JSON.parse(jsonData);
            if (Array.isArray(importedData)) {
                appsData.length = 0; // Clear existing data
                appsData.push(...importedData);
                return true;
            }
            return false;
        } catch (error) {
            console.error('Error importing apps data:', error);
            return false;
        }
    },
    
    // Backup apps data to localStorage
    backupToLocalStorage: function() {
        try {
            localStorage.setItem('apps_data_backup', JSON.stringify(appsData));
            localStorage.setItem('apps_data_backup_timestamp', new Date().toISOString());
            return true;
        } catch (error) {
            console.error('Error backing up apps data:', error);
            return false;
        }
    },
    
    // Restore apps data from localStorage
    restoreFromLocalStorage: function() {
        try {
            const backup = localStorage.getItem('apps_data_backup');
            if (backup) {
                const restoredData = JSON.parse(backup);
                if (Array.isArray(restoredData)) {
                    appsData.length = 0;
                    appsData.push(...restoredData);
                    return true;
                }
            }
            return false;
        } catch (error) {
            console.error('Error restoring apps data:', error);
            return false;
        }
    },
    
    // Get backup info
    getBackupInfo: function() {
        const timestamp = localStorage.getItem('apps_data_backup_timestamp');
        const size = localStorage.getItem('apps_data_backup')?.length || 0;
        
        return {
            exists: !!timestamp,
            timestamp: timestamp,
            size: this.formatFileSize(size),
            appCount: appsData.length
        };
    }
};

// Initialize data if empty
if (appsData.length === 0) {
    // Add default apps if array is empty
    const defaultApps = [
        {
            id: 1,
            name: "Sample App",
            description: "This is a sample app description",
            version: "1.0.0",
            size: "10 MB",
            logo: "assets/img/default-logo.png",
            apk_file: "uploads/apk/sample.apk",
            downloads: 100,
            created_at: new Date().toISOString().split('T')[0],
            category: "tools",
            features: ["Feature 1", "Feature 2"],
            rating: 4.0,
            developer: "Sample Dev",
            requirements: "Android 5.0+",
            whats_new: "Initial release",
            last_updated: new Date().toISOString().split('T')[0],
            file_size: 10485760,
            premium: false,
            trending: false,
            featured: false
        }
    ];
    
    appsData.push(...defaultApps);
}

// Create auto-backup on page load
if (typeof window !== 'undefined') {
    window.addEventListener('load', function() {
        // Backup once per day
        const lastBackup = localStorage.getItem('last_auto_backup');
        const today = new Date().toDateString();
        
        if (!lastBackup || lastBackup !== today) {
            AppUtils.backupToLocalStorage();
            localStorage.setItem('last_auto_backup', today);
        }
    });
}

// Export for Node.js
if (typeof module !== 'undefined' && module.exports) {
    module.exports = {
        appsData,
        featuredApps,
        popularApps,
        newApps,
        trendingApps,
        premiumApps,
        categories,
        stats,
        AppUtils
    };
}

// Make available globally for browser
window.appsData = appsData;
window.featuredApps = featuredApps;
window.popularApps = popularApps;
window.newApps = newApps;
window.trendingApps = trendingApps;
window.premiumApps = premiumApps;
window.categories = categories;
window.stats = stats;
window.AppUtils = AppUtils;

console.log('ðŸ“± OP ASHISH YT Apps Database Loaded:', {
    totalApps: stats.totalApps,
    totalDownloads: AppUtils.formatNumber(stats.totalDownloads),
    categories: Object.keys(categories).length - 1, // Excluding 'all'
    averageRating: stats.averageRating,
    dataVersion: '3.0.0'
});